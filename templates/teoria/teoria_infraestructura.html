{% extends "base.html" %} {% block title %}Infraestructura Backend - Python
Academy{% endblock %} {% block content %}
<section class="py-5 bg-light border-bottom">
  <div class="container text-center">
    <span class="badge bg-primary mb-3">TEMA 1</span>
    <h1 class="display-5 fw-bold text-dark">Infraestructura Backend</h1>
    <p class="lead text-muted mx-auto" style="max-width: 700px">
      Entiende c√≥mo funciona la arquitectura cliente-servidor y la estructura
      profesional de un proyecto en Flask.
    </p>
  </div>
</section>

<section class="section py-5">
  <div class="container">
    <div class="row justify-content-start">
      <!-- Sidebar Navigation -->
      <div class="col-lg-3 d-none d-lg-block">
        <nav class="sidebar-nav">
          <h5><i class="bi bi-list-check me-2"></i>Contenido</h5>
          <ul>
            {% for subtema in tema.subtemas %}
            <li>
              <a
                href="#{{ subtema.id }}"
                class="{% if loop.first %}active{% endif %}"
              >
                {{ subtema.titulo }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </nav>
      </div>

      <!-- Main Content -->
      <div class="col-lg-8">
        <h3 class="fw-bold mb-3" id="que-es-backend">¬øQu√© es el Backend?</h3>

        <div class="row align-items-start my-4">
          <!-- Texto -->
          <div class="col-lg-7">
            <p>
              En el desarrollo de aplicaciones web, el
              <strong>backend</strong> representa la parte interna del sistema
              que no es visible para el usuario final. Es el componente
              encargado de procesar la informaci√≥n, aplicar reglas de negocio y
              garantizar que los datos fluyan de forma correcta y segura.
            </p>

            <p>
              Mientras el <strong>frontend</strong> se enfoca en la interfaz
              gr√°fica (botones, formularios, colores y animaciones), el backend
              se ejecuta en un <strong>servidor</strong> y act√∫a como el
              intermediario entre el usuario, la l√≥gica del sistema y la base de
              datos.
            </p>
          </div>

          <!-- Video lateral -->
          <div class="col-lg-5">
            <div class="card border-0 shadow-sm">
              <div class="card-body p-2">
                <div class="ratio ratio-16x9 rounded overflow-hidden">
                  <iframe
                    src="https://www.youtube.com/embed/7vbi-OCFZEY"
                    title="¬øQu√© es Backend?"
                    allowfullscreen
                  >
                  </iframe>
                </div>

                <small class="text-muted d-block mt-2 text-center">
                  Video explicativo: rol del backend en aplicaciones web
                </small>
              </div>
            </div>
          </div>
        </div>

        <div class="card border-0 shadow-sm my-5"></div>

        <div
          class="alert alert-info my-4 d-flex align-items-center"
          role="alert"
        >
          <i class="bi bi-info-circle-fill fs-4 me-3"></i>
          <div>
            <strong>Idea clave:</strong> El backend decide
            <em>qu√© hacer</em> con la informaci√≥n, <em>cu√°ndo</em> procesarla y
            <em>c√≥mo</em> devolver una respuesta adecuada al usuario.
          </div>
        </div>

        <p>
          Cuando un usuario accede a una p√°gina web, inicia sesi√≥n o env√≠a un
          formulario, el backend recibe esa solicitud, la interpreta y ejecuta
          acciones como:
        </p>

        <ul>
          <li>Validar datos ingresados por el usuario</li>
          <li>Consultar o modificar informaci√≥n en la base de datos</li>
          <li>Aplicar reglas de negocio (permisos, roles, restricciones)</li>
          <li>Generar una respuesta en formato HTML o JSON</li>
        </ul>

        <p>
          En este curso, el backend ser√° desarrollado utilizando
          <strong>Python</strong>, un lenguaje reconocido por su legibilidad,
          eficiencia y amplio uso en la industria, junto con
          <strong>Flask</strong>, un micro-framework que permite construir
          aplicaciones web de manera modular y profesional.
        </p>

        <div
          class="alert alert-info my-4 d-flex align-items-center"
          role="alert"
        >
          <i class="bi bi-info-circle-fill fs-4 me-3"></i>
          <div>
            <strong>Idea clave:</strong> Frameworks como Flask facilitan la
            creaci√≥n del backend, pero los conceptos de l√≥gica, seguridad y
            manejo de datos son independientes de la herramienta utilizada.
          </div>
        </div>

        <div class="card bg-light border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold mb-2">üìå Backend en un entorno real</h6>
            <p class="mb-0">
              En aplicaciones profesionales, el backend no solo responde p√°ginas
              web, sino que tambi√©n gestiona autenticaci√≥n, seguridad, sesiones
              de usuario, comunicaci√≥n con APIs externas y escalabilidad del
              sistema.
            </p>
          </div>
        </div>

        <p>
          Comprender el funcionamiento del backend es fundamental para
          desarrollar aplicaciones robustas, seguras y capaces de crecer
          conforme aumentan los usuarios y la complejidad del sistema.
        </p>
        <h3 class="fw-bold mt-5 mb-4" id="arquitectura-cliente-servidor">
          Arquitectura Cliente‚ÄìServidor
        </h3>

        <p>
          La <strong>arquitectura cliente‚Äìservidor</strong> es el modelo
          fundamental sobre el cual se construyen las aplicaciones web modernas.
          Define c√≥mo los usuarios interact√∫an con un sistema a trav√©s de una
          red.
        </p>

        <p>
          En este modelo, las responsabilidades se encuentran claramente
          separadas, lo que permite desarrollar aplicaciones m√°s seguras,
          escalables y f√°ciles de mantener.
        </p>

        <div class="row g-4 my-4">
          <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="fw-bold">üßë‚Äçüíª Cliente</h6>
                <p class="text-muted mb-0">
                  Es el punto de interacci√≥n con el usuario. Puede ser un
                  navegador web o una aplicaci√≥n m√≥vil. Su funci√≥n principal es
                  enviar solicitudes al servidor y mostrar las respuestas
                  recibidas.
                </p>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="fw-bold">üñ•Ô∏è Servidor</h6>
                <p class="text-muted mb-0">
                  Recibe las solicitudes del cliente, ejecuta la l√≥gica del
                  backend, accede a los datos necesarios y devuelve una
                  respuesta adecuada.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="alert alert-info">
          <strong>Idea clave:</strong> el cliente solicita informaci√≥n, pero
          nunca controla la l√≥gica principal del sistema; esa responsabilidad
          pertenece al servidor.
        </div>

        <h3 class="fw-bold mt-5 mb-4" id="flujo-peticion">
          Flujo de una Petici√≥n Web
        </h3>

        <p>
          Cada vez que un usuario interact√∫a con una aplicaci√≥n web ‚Äîpor
          ejemplo, al hacer clic en un bot√≥n, iniciar sesi√≥n o enviar un
          formulario‚Äî se genera una <strong>petici√≥n web</strong> que debe ser
          procesada por el backend.
        </p>

        <p>
          Aunque este proceso ocurre en milisegundos, internamente sigue un
          <strong>flujo bien definido</strong> que permite validar la
          informaci√≥n, aplicar reglas de negocio y devolver una respuesta
          adecuada al cliente.
        </p>

        <!-- ================= FLUJO VISUAL ================= -->
        <style>
          .flow-box {
            border-radius: 1rem;
            padding: 1.2rem;
            font-weight: 600;
            color: #1f2937;
            background: #f8fafc;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
          }

          .flow-icon {
            font-size: 1.8rem;
          }

          .flow-arrow {
            font-size: 2rem;
            color: #2563eb;
          }

          .flow-client {
            border-left: 6px solid #2563eb;
          }
          .flow-route {
            border-left: 6px solid #6b7280;
          }
          .flow-back {
            border-left: 6px solid #06b6d4;
          }
          .flow-db {
            border-left: 6px solid #f59e0b;
          }
          .flow-resp {
            border-left: 6px solid #16a34a;
          }
        </style>

        <div class="card shadow-sm border-0 my-4">
          <div class="card-body">
            <p class="text-muted mb-4 text-center">
              Flujo completo de una petici√≥n web desde el cliente hasta la
              respuesta final.
            </p>

            <div class="row text-center align-items-center g-3">
              <div class="col-md-2">
                <div class="flow-box flow-client">
                  <div class="flow-icon">üåê</div>
                  Cliente
                  <div class="text-muted small">Request HTTP</div>
                </div>
              </div>

              <div class="col-md-1 flow-arrow">‚Üí</div>

              <div class="col-md-2">
                <div class="flow-box flow-route">
                  <div class="flow-icon">üìç</div>
                  Ruta
                  <div class="text-muted small">URL / Endpoint</div>
                </div>
              </div>

              <div class="col-md-1 flow-arrow">‚Üí</div>

              <div class="col-md-2">
                <div class="flow-box flow-back">
                  <div class="flow-icon">‚öôÔ∏è</div>
                  Backend
                  <div class="text-muted small">L√≥gica</div>
                </div>
              </div>

              <div class="col-md-1 flow-arrow">‚Üí</div>

              <div class="col-md-2">
                <div class="flow-box flow-db">
                  <div class="flow-icon">üóÑÔ∏è</div>
                  Datos
                  <div class="text-muted small">Base de datos</div>
                </div>
              </div>

              <div class="col-md-1 flow-arrow">‚Üí</div>

              <div class="col-md-2">
                <div class="flow-box flow-resp">
                  <div class="flow-icon">üì§</div>
                  Response
                  <div class="text-muted small">Resultado</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ================= EXPLICACI√ìN PASO A PASO ================= -->

        <h5 class="fw-bold mt-4">üìò Explicaci√≥n del flujo paso a paso</h5>

        <ol class="mt-3">
          <li>
            <strong>Cliente:</strong>
            el navegador o aplicaci√≥n m√≥vil env√≠a una petici√≥n HTTP (GET, POST,
            PUT, DELETE) hacia una URL espec√≠fica.
          </li>

          <li>
            <strong>Ruta:</strong>
            el servidor identifica qu√© ruta debe atender la solicitud. En Flask,
            esta ruta est√° asociada a una funci√≥n de Python.
          </li>

          <li>
            <strong>Backend:</strong>
            se ejecuta la l√≥gica del sistema, validando datos, verificando
            permisos y aplicando reglas de negocio.
          </li>

          <li>
            <strong>Base de datos:</strong>
            si es necesario, el backend consulta, inserta o actualiza
            informaci√≥n almacenada.
          </li>

          <li>
            <strong>Response:</strong>
            el servidor genera una respuesta (HTML, JSON u otro formato) y la
            devuelve al cliente.
          </li>
        </ol>

        <div class="alert alert-info my-4 d-flex align-items-center">
          <i class="bi bi-arrow-repeat fs-4 me-3"></i>
          <div>
            <strong>Concepto clave:</strong>
            el usuario solo visualiza el resultado final, pero cada acci√≥n pasa
            obligatoriamente por este flujo interno del backend.
          </div>
        </div>

        <!-- ================= RELACI√ìN CON FLASK ================= -->

        <h5 class="fw-bold mt-4">üîó Relaci√≥n del flujo con Flask</h5>

        <p>
          En Flask, el flujo de una petici√≥n web se implementa mediante
          <strong>rutas</strong> que act√∫an como puntos de entrada al backend.
          Cada ruta define qu√© funci√≥n se ejecuta y qu√© respuesta se devuelve.
        </p>

        <div class="bg-dark text-white p-4 rounded-3 mb-4">
          <pre
            class="mb-0"
          ><code class="language-python">from flask import Flask, render_template, request

app = Flask(__name__)

@app.route("/login", methods=["GET", "POST"])
def login():
    if request.method == "POST":
        # Procesamiento backend
        return "Acceso concedido"
    return render_template("login.html")</code></pre>
        </div>

        <p>
          Este ejemplo refleja el flujo completo: el cliente env√≠a la solicitud,
          la ruta la recibe, el backend procesa la l√≥gica y finalmente se
          devuelve una respuesta.
        </p>

        <!-- ================= CIERRE ================= -->

        <div class="alert alert-success my-4 d-flex align-items-center">
          <i class="bi bi-check-circle-fill fs-4 me-3"></i>
          <div>
            <strong>Conclusi√≥n:</strong>
            comprender el flujo de una petici√≥n web es esencial para desarrollar
            aplicaciones backend seguras, organizadas y f√°ciles de mantener.
          </div>
        </div>

        <h3 class="fw-bold mt-5 mb-3" id="estructura-proyecto">
          Estructura de un Proyecto Profesional
        </h3>

        <p>
          Un proyecto backend profesional no se construye de forma desordenada.
          La <strong>estructura del proyecto</strong> es fundamental para
          garantizar mantenimiento, escalabilidad y comprensi√≥n del c√≥digo a
          largo plazo.
        </p>

        <p>
          Flask promueve una organizaci√≥n clara donde cada archivo y carpeta
          cumple una funci√≥n espec√≠fica. Esta separaci√≥n permite que el proyecto
          crezca sin volverse dif√≠cil de mantener.
        </p>

        <div
          class="alert alert-info my-4 d-flex align-items-center"
          role="alert"
        >
          <i class="bi bi-folder-fill fs-4 me-3"></i>
          <div>
            <strong>Buenas pr√°cticas:</strong> Un proyecto bien estructurado
            facilita el trabajo en equipo, reduce errores y mejora la calidad
            del software.
          </div>
        </div>

        <p>
          A continuaci√≥n se muestra la estructura base utilizada en proyectos
          Flask de nivel profesional:
        </p>

        <div class="card bg-light border-0 mb-4">
          <div class="card-body font-monospace">
            <ul class="list-unstyled mb-0">
              <li>üìÅ <strong>proyecto/</strong></li>
              <li class="ms-3">
                üìÑ <strong>app.py</strong>
                <span class="text-muted"
                  >// Punto de entrada de la aplicaci√≥n</span
                >
              </li>
              <li class="ms-3">
                üìÅ <strong>static/</strong>
                <span class="text-muted">// Archivos p√∫blicos</span>
              </li>
              <li class="ms-4">
                üìÅ css/ <span class="text-muted">// Estilos</span>
              </li>
              <li class="ms-4">
                üìÅ js/ <span class="text-muted">// L√≥gica del cliente</span>
              </li>
              <li class="ms-4">
                üìÅ img/ <span class="text-muted">// Im√°genes</span>
              </li>
              <li class="ms-3">
                üìÅ <strong>templates/</strong>
                <span class="text-muted">// Vistas HTML</span>
              </li>
              <li class="ms-4">
                üìÑ base.html
                <span class="text-muted">// Plantilla principal</span>
              </li>
              <li class="ms-4">
                üìÑ home.html <span class="text-muted">// P√°gina inicial</span>
              </li>
            </ul>
          </div>
        </div>

        <h5 class="fw-bold mt-4">üìÑ app.py</h5>
        <p>
          Es el archivo principal del proyecto. Aqu√≠ se inicializa Flask, se
          definen las rutas principales y se configura el comportamiento general
          de la aplicaci√≥n.
        </p>

        <h5 class="fw-bold mt-4">üìÅ templates/</h5>
        <p>
          Contiene todos los archivos HTML. Flask utiliza este directorio para
          renderizar vistas din√°micas mediante el motor de plantillas Jinja.
        </p>

        <h5 class="fw-bold mt-4">üìÅ static/</h5>
        <p>
          Almacena los recursos est√°ticos del proyecto como hojas de estilo,
          scripts JavaScript e im√°genes. Estos archivos no son procesados por
          Flask, sino servidos directamente al navegador.
        </p>

        <div class="card bg-light border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold mb-2">üîé Importancia de la separaci√≥n</h6>
            <p class="mb-0">
              Separar la l√≥gica del backend, las vistas y los recursos est√°ticos
              permite que cada parte del sistema evolucione de forma
              independiente, manteniendo el proyecto ordenado y profesional.
            </p>
          </div>
        </div>

        <p>
          Adoptar una estructura profesional desde el inicio evita problemas
          futuros y prepara la aplicaci√≥n para incorporar bases de datos,
          autenticaci√≥n, APIs y m√≥dulos adicionales.
        </p>

        <h3 class="fw-bold mt-5 mb-3" id="sistema-rutas">
          Sistema de Rutas en Flask
        </h3>

        <p>
          El <strong>sistema de rutas</strong> es uno de los pilares
          fundamentales del backend. En Flask, las rutas permiten conectar una
          <em>URL</em> con una <strong>funci√≥n escrita en Python</strong>. Esta
          funci√≥n se ejecuta cuando el usuario accede a una direcci√≥n espec√≠fica
          desde el navegador.
        </p>

        <p>
          Cada ruta representa una acci√≥n del sistema, como mostrar una p√°gina,
          procesar un formulario o devolver informaci√≥n en formato JSON.
        </p>

        <div
          class="alert alert-info my-4 d-flex align-items-center"
          role="alert"
        >
          <i class="bi bi-diagram-3-fill fs-4 me-3"></i>
          <div>
            <strong>Concepto clave:</strong> Una ruta define <em>qu√© URL</em> se
            atiende y <em>qu√© funci√≥n</em> se ejecuta cuando esa URL es
            solicitada.
          </div>
        </div>

        <p>
          En Flask, las rutas se definen mediante <strong>decoradores</strong>.
          Un decorador es una instrucci√≥n especial que se coloca sobre una
          funci√≥n para modificar su comportamiento.
        </p>

        <div class="bg-dark text-white p-4 rounded-3 mb-4">
          <pre
            class="mb-0"
          ><code class="language-python">from flask import Flask, render_template
  

app = Flask(__name__)

@app.route("/")
def home():
    return render_template("home.html")</code></pre>
        </div>

        <p>
          En el ejemplo anterior, cuando el usuario accede a la URL principal
          (<code>/</code>), Flask ejecuta la funci√≥n <code>home()</code>
          y devuelve el contenido del archivo HTML correspondiente.
        </p>

        <h5 class="fw-bold mt-4">üìå M√©todos HTTP</h5>
        <p>
          Las rutas tambi√©n pueden responder a diferentes m√©todos HTTP. Los m√°s
          comunes son:
        </p>

        <ul>
          <li><strong>GET:</strong> Solicita informaci√≥n al servidor</li>
          <li><strong>POST:</strong> Env√≠a informaci√≥n para ser procesada</li>
        </ul>

        <div class="bg-dark text-white p-4 rounded-3 mb-4">
          <pre
            class="mb-0"
          ><code class="language-python">@app.route("/login", methods=["GET", "POST"])
def login():
    if request.method == "POST":
        return "Procesando datos del formulario"
    return render_template("login.html")</code></pre>
        </div>

        <p>
          Gracias a este sistema, una misma ruta puede mostrar un formulario y
          tambi√©n procesar los datos enviados por el usuario.
        </p>

        <h5 class="fw-bold mt-4">üìå Rutas como punto de control</h5>
        <p>
          En aplicaciones reales, las rutas funcionan como puntos de control
          donde se valida informaci√≥n, se verifican permisos y se decide qu√©
          respuesta debe recibir el usuario.
        </p>

        <div class="card bg-light border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold mb-2">üîê Uso profesional de rutas</h6>
            <p class="mb-0">
              En proyectos avanzados, las rutas controlan autenticaci√≥n,
              autorizaci√≥n, acceso a bases de datos y comunicaci√≥n con APIs
              externas.
            </p>
          </div>
        </div>

        <p>
          Comprender el sistema de rutas es esencial para construir aplicaciones
          din√°micas, seguras y organizadas, ya que cada interacci√≥n del usuario
          pasa obligatoriamente por una ruta del backend.
        </p>
        <h3 class="fw-bold mt-5 mb-4" id="backend-vs-herramientas">
          Backend: Concepto vs Herramienta
        </h3>

        <p>
          Es fundamental diferenciar entre el
          <strong>backend como concepto</strong> y las
          <strong>herramientas utilizadas para desarrollarlo</strong>. Esta
          distinci√≥n evita confusiones comunes en etapas iniciales de
          aprendizaje.
        </p>

        <div class="row g-4 my-4">
          <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="fw-bold">üß† Backend (Concepto)</h6>
                <p class="text-muted mb-0">
                  Representa la l√≥gica del sistema: validaciones, reglas de
                  negocio, seguridad, control de acceso y manejo de datos.
                </p>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card shadow-sm border-0 h-100">
              <div class="card-body">
                <h6 class="fw-bold">üõ†Ô∏è Flask (Herramienta)</h6>
                <p class="text-muted mb-0">
                  Es un micro-framework que facilita la implementaci√≥n del
                  backend, proporcionando estructura, rutas y renderizado de
                  vistas.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="alert alert-info">
          <strong>Idea clave:</strong> aprender backend implica comprender los
          principios que existen detr√°s de cualquier framework, no solo
          memorizar una herramienta.
        </div>

        <h3 class="fw-bold mt-5 mb-4" id="errores-backend">
          Errores Comunes en el Desarrollo Backend
        </h3>

        <p>
          Durante el desarrollo de aplicaciones backend, es frecuente cometer
          errores que no siempre se detectan de inmediato, pero que pueden
          afectar gravemente la <strong>seguridad</strong>, el
          <strong>rendimiento</strong> y la <strong>estabilidad</strong>
          del sistema.
        </p>

        <p>
          Identificar y comprender estos errores permite evitarlos desde etapas
          tempranas y desarrollar aplicaciones m√°s profesionales y confiables.
        </p>

        <!-- ================= ERROR 1 ================= -->
        <div class="card shadow-sm border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold">‚ùå Confiar la validaci√≥n solo al Frontend</h6>
            <p class="text-muted mb-0">
              Un error com√∫n es asumir que los datos enviados por el cliente
              siempre son correctos. El frontend puede ser manipulado
              f√°cilmente, por lo que
              <strong
                >toda validaci√≥n cr√≠tica debe realizarse en el backend</strong
              >.
            </p>
          </div>
        </div>

        <!-- ================= ERROR 2 ================= -->
        <div class="card shadow-sm border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold">‚ùå Mezclar l√≥gica de negocio con vistas</h6>
            <p class="text-muted mb-0">
              Colocar l√≥gica compleja directamente en archivos HTML o plantillas
              dificulta el mantenimiento del proyecto. El backend debe
              encargarse de la l√≥gica, mientras que las vistas solo presentan la
              informaci√≥n.
            </p>
          </div>
        </div>

        <!-- ================= ERROR 3 ================= -->
        <div class="card shadow-sm border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold">‚ùå No proteger rutas sensibles</h6>
            <p class="text-muted mb-0">
              Permitir el acceso libre a rutas cr√≠ticas, como paneles
              administrativos o acciones internas, expone el sistema a accesos
              no autorizados. El backend debe controlar autenticaci√≥n y
              permisos.
            </p>
          </div>
        </div>

        <!-- ================= ERROR 4 ================= -->
        <div class="card shadow-sm border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold">‚ùå Exponer informaci√≥n interna al cliente</h6>
            <p class="text-muted mb-0">
              Mostrar mensajes de error detallados, consultas SQL o estructuras
              internas puede revelar informaci√≥n sensible. El backend debe
              manejar errores de forma controlada.
            </p>
          </div>
        </div>

        <!-- ================= ERROR 5 ================= -->
        <div class="card shadow-sm border-0 my-4">
          <div class="card-body">
            <h6 class="fw-bold">‚ùå No manejar errores y excepciones</h6>
            <p class="text-muted mb-0">
              No capturar errores provoca ca√≠das inesperadas del sistema. Un
              backend profesional debe manejar excepciones y responder de forma
              adecuada ante fallos.
            </p>
          </div>
        </div>

        <!-- ================= BLOQUE DE ALERTA ================= -->
        <div class="alert alert-warning my-4 d-flex align-items-center">
          <i class="bi bi-exclamation-triangle-fill fs-4 me-3"></i>
          <div>
            <strong>Advertencia:</strong>
            muchos de estos errores no se notan durante el desarrollo, pero
            generan vulnerabilidades cr√≠ticas en producci√≥n.
          </div>
        </div>

        <!-- ================= BUENAS PR√ÅCTICAS ================= -->
        <h5 class="fw-bold mt-4">‚úÖ Enfoque Correcto</h5>

        <p>
          Evitar estos errores implica aplicar buenas pr√°cticas desde el inicio,
          como separar responsabilidades, validar datos en el servidor y
          controlar correctamente el acceso a las rutas.
        </p>

        <ul>
          <li>Validar siempre la informaci√≥n en el backend</li>
          <li>Mantener separada la l√≥gica, las vistas y los datos</li>
          <li>Controlar autenticaci√≥n y permisos</li>
          <li>Manejar errores de forma segura</li>
        </ul>

        <div class="alert alert-success my-4 d-flex align-items-center">
          <i class="bi bi-check-circle-fill fs-4 me-3"></i>
          <div>
            <strong>Conclusi√≥n:</strong>
            un backend robusto no solo funciona, sino que est√° preparado para
            errores, ataques y crecimiento del sistema.
          </div>
        </div>

        <h3 class="fw-bold mt-5 mb-4" id="cuestionario">
          üß† Cuestionario de Aprendizaje
        </h3>

        <p class="text-muted mb-4">
          Responde cada pregunta para avanzar. Cada pregunta solo puede
          responderse una vez y se calificar√° autom√°ticamente.
        </p>

        <div class="card shadow-lg border-0 my-5">
          <!-- Encabezado del cuestionario -->
          <div class="card-header bg-primary bg-opacity-10 border-0">
            <h4 class="fw-bold text-primary mb-1 d-flex align-items-center">
              <i class="bi bi-ui-checks-grid me-2"></i>
              Evaluaci√≥n de Aprendizaje
            </h4>
            <small class="text-muted">
              Responde cada pregunta de forma secuencial. Cada pregunta tiene un
              solo intento.
            </small>
          </div>

          <!-- Cuerpo -->
          <div class="card-body border-start border-4 border-primary">
            <!-- üëá AQU√ç PEGA TU CUESTIONARIO TAL CUAL üëá -->

            <div class="card shadow-sm border-0">
              <div class="card-body" id="quizContainer">
                <!-- Progreso -->
                <div class="mb-3 text-muted">
                  Pregunta <span id="numPregunta"></span> de
                  <span id="totalPreguntas"></span>
                </div>

                <!-- Pregunta -->
                <h5 class="fw-bold mb-3" id="preguntaTitulo"></h5>

                <!-- Opciones -->
                <div id="opciones" class="mb-3"></div>

                <!-- Feedback -->
                <div id="feedback" class="alert d-none"></div>

                <!-- Soluci√≥n -->
                <div id="solucion" class="alert alert-info d-none"></div>

                <!-- Bot√≥n siguiente -->
                <div class="text-end">
                  <button
                    id="btnSiguiente"
                    class="btn btn-primary d-none"
                    onclick="siguientePregunta()"
                  >
                    Siguiente ‚Üí
                  </button>
                </div>
              </div>
            </div>

            <!-- üëÜ FIN DEL CUESTIONARIO üëÜ -->
          </div>
        </div>
        <h3 class="fw-bold mt-5 mb-4" id="juego">
          üçî Mini-juego: Arma la Petici√≥n Backend
        </h3>

        <p class="text-muted mb-4">
          Arrastra los componentes y arma correctamente la petici√≥n del backend.
        </p>

        <style>
          /* CONTENEDOR GENERAL */
          .burger-game {
            background: linear-gradient(180deg, #fff7ed, #ffffff);
          }

          /* INGREDIENTES */
          .burger-game .ingredient {
            padding: 0.7rem 1.2rem;
            border-radius: 999px;
            cursor: grab;
            margin-bottom: 0.6rem;
            text-align: center;
            font-weight: 600;
            color: #1f2937;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            transition:
              transform 0.2s ease,
              box-shadow 0.2s ease;
          }

          .burger-game .ingredient:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.12);
          }

          .ingredient[data-step="1"] {
            background: #bfdbfe;
          } /* Request */
          .ingredient[data-step="2"] {
            background: #bbf7d0;
          } /* Validar */
          .ingredient[data-step="3"] {
            background: #fde68a;
          } /* Auth */
          .ingredient[data-step="4"] {
            background: #fecaca;
          } /* BD */
          .ingredient[data-step="5"] {
            background: #e9d5ff;
          } /* Response */

          /* PLATO (PAN) */
          .burger-game .plate {
            min-height: 320px;
            border-radius: 2rem;
            padding: 1.2rem;
            background: #fde68a;
            border: 4px solid #f59e0b;
            box-shadow: inset 0 -10px 0 #fbbf24;
          }

          /* CAPAS DENTRO DE LA HAMBURGUESA */
          .burger-game .plate-item {
            background: linear-gradient(180deg, #ffffff, #f3f4f6);
            border-radius: 999px;
            padding: 0.55rem;
            margin-bottom: 0.5rem;
            text-align: center;
            font-weight: 600;
            animation: dropIn 0.3s ease;
          }

          @keyframes dropIn {
            from {
              transform: translateY(-10px);
              opacity: 0;
            }
            to {
              transform: translateY(0);
              opacity: 1;
            }
          }
        </style>

        <div class="card shadow-lg border-0 burger-game">
          <div class="card-body">
            <div class="row">
              <!-- INGREDIENTES -->
              <div class="col-md-4">
                <h6 class="fw-bold mb-3">Ingredientes</h6>

                <div class="ingredient" draggable="true" data-step="1">
                  üåê Request
                </div>
                <div class="ingredient" draggable="true" data-step="2">
                  üîç Validar datos
                </div>
                <div class="ingredient" draggable="true" data-step="3">
                  üîê Autenticaci√≥n
                </div>
                <div class="ingredient" draggable="true" data-step="4">
                  üóÑÔ∏è Base de datos
                </div>
                <div class="ingredient" draggable="true" data-step="5">
                  üì§ Response
                </div>

                <button
                  class="btn btn-outline-danger mt-3 w-100"
                  onclick="reiniciarBurger()"
                >
                  üîÑ Reiniciar
                </button>
              </div>

              <!-- PLATO -->
              <div class="col-md-8">
                <h6 class="fw-bold mb-3">Plato (Backend)</h6>

                <div id="plate" class="plate"></div>

                <div id="burgerResult" class="mt-3"></div>
              </div>
            </div>
          </div>
        </div>

        <script>
          const preguntas = [
            {
              titulo: "¬øCu√°l es la funci√≥n principal del backend?",
              opciones: [
                { texto: "Dise√±ar la interfaz", correcta: false },
                { texto: "Procesar la l√≥gica y los datos", correcta: true },
                { texto: "Aplicar estilos visuales", correcta: false },
              ],
              solucion:
                "El backend procesa la l√≥gica, reglas de negocio y datos del sistema.",
            },
            {
              titulo: "¬øD√≥nde se ejecuta el backend?",
              opciones: [
                { texto: "En el navegador", correcta: false },
                { texto: "En el servidor", correcta: true },
              ],
              solucion: "El backend se ejecuta en el servidor.",
            },
            {
              titulo: "¬øQu√© ocurre cuando un usuario env√≠a un formulario?",
              opciones: [
                { texto: "El backend procesa la solicitud", correcta: true },
                { texto: "El CSS guarda los datos", correcta: false },
              ],
              solucion: "El backend recibe y procesa los datos enviados.",
            },
            {
              titulo: "¬øQu√© tarea NO pertenece al backend?",
              opciones: [
                { texto: "Dise√±ar animaciones visuales", correcta: true },
                { texto: "Validar usuarios", correcta: false },
              ],
              solucion: "Las animaciones corresponden al frontend.",
            },
            {
              titulo: "¬øPor qu√© el backend es clave para la seguridad?",
              opciones: [
                { texto: "Controla accesos y validaciones", correcta: true },
                { texto: "Define colores y fuentes", correcta: false },
              ],
              solucion: "El backend valida usuarios y protege la informaci√≥n.",
            },
            {
              titulo: "¬øQu√© relaci√≥n tiene Flask con el backend?",
              opciones: [
                {
                  texto: "Es una herramienta para desarrollarlo",
                  correcta: true,
                },
                { texto: "Es un lenguaje de dise√±o", correcta: false },
              ],
              solucion: "Flask es un framework para construir backend.",
            },
            {
              titulo: "¬øQu√© pasar√≠a si no existiera backend?",
              opciones: [
                {
                  texto: "La aplicaci√≥n no funcionar√≠a correctamente",
                  correcta: true,
                },
                { texto: "Solo cambiar√≠a el dise√±o", correcta: false },
              ],
              solucion: "Sin backend no existe l√≥gica ni manejo de datos.",
            },
          ];

          let indice = 0;
          let puntaje = 0;
          let respondida = false;

          document.getElementById("totalPreguntas").textContent =
            preguntas.length;

          function cargarPregunta() {
            const p = preguntas[indice];
            respondida = false;

            document.getElementById("numPregunta").textContent = indice + 1;
            document.getElementById("preguntaTitulo").textContent = p.titulo;

            const opcionesDiv = document.getElementById("opciones");
            opcionesDiv.innerHTML = "";

            p.opciones.forEach((op) => {
              const btn = document.createElement("button");
              btn.className = "btn btn-outline-secondary w-100 mb-2";
              btn.textContent = op.texto;
              btn.onclick = () => responder(btn, op.correcta, p.solucion);
              opcionesDiv.appendChild(btn);
            });

            document.getElementById("feedback").classList.add("d-none");
            document.getElementById("solucion").classList.add("d-none");
            document.getElementById("btnSiguiente").classList.add("d-none");
          }

          function responder(btn, correcta, solucion) {
            if (respondida) return;
            respondida = true;

            const feedback = document.getElementById("feedback");
            const solucionDiv = document.getElementById("solucion");

            // Deshabilitar botones
            document
              .querySelectorAll("#opciones button")
              .forEach((b) => (b.disabled = true));

            if (correcta) {
              puntaje++;
              btn.classList.add("btn-success");
              feedback.className = "alert alert-success";
              feedback.textContent = "‚úîÔ∏è Respuesta correcta.";
            } else {
              btn.classList.add("btn-danger");
              feedback.className = "alert alert-warning";
              feedback.textContent = "‚ùå Respuesta incorrecta.";
              solucionDiv.textContent = solucion;
              solucionDiv.classList.remove("d-none");
            }

            feedback.classList.remove("d-none");
            document.getElementById("btnSiguiente").classList.remove("d-none");
          }

          function siguientePregunta() {
            indice++;
            if (indice < preguntas.length) {
              cargarPregunta();
            } else {
              mostrarResultado();
            }
          }
          function mostrarResultado() {
            const nota = Math.round((puntaje / preguntas.length) * 10);
            const aprobado = nota >= 7;

            document.getElementById("quizContainer").innerHTML = `
              <div class="text-center py-4">

                <h4 class="fw-bold mb-3">üìä Resultado Final</h4>

                <div class="display-3 fw-bold mb-2 ${aprobado ? "text-success" : "text-danger"}">
                  ${nota}/10
                </div>

                <p class="text-muted mb-4">
                  Respuestas correctas: <strong>${puntaje}</strong> de <strong>${preguntas.length}</strong>
                </p>

                <div class="alert ${aprobado ? "alert-success" : "alert-warning"} mx-auto" style="max-width: 500px;">
                  ${
                    aprobado
                      ? "üéâ <strong>¬°Felicidades!</strong> Has aprobado la evaluaci√≥n. Contin√∫a con el siguiente tema."
                      : "üìò <strong>No te desanimes.</strong> Repasa el contenido y vuelve a intentarlo."
                  }
                </div>

                <button class="btn btn-outline-primary mt-3" onclick="reiniciarCuestionario()">
                  üîÑ Realizar la evaluaci√≥n nuevamente
                </button>

              </div>
            `;
          }

          function reiniciarCuestionario() {
            // Recarga solo la p√°gina actual
            location.reload();
          }

          cargarPregunta();
        </script>

        <script>
          let order = [];

          document
            .querySelectorAll(".burger-game .ingredient")
            .forEach((item) => {
              item.addEventListener("dragstart", (e) => {
                e.dataTransfer.setData("step", item.dataset.step);
                e.dataTransfer.setData("text", item.textContent);
              });
            });

          const plate = document.getElementById("plate");

          plate.addEventListener("dragover", (e) => e.preventDefault());

          plate.addEventListener("drop", (e) => {
            e.preventDefault();

            const step = e.dataTransfer.getData("step");
            const text = e.dataTransfer.getData("text");

            if (order.includes(step)) return;

            order.push(step);

            const div = document.createElement("div");
            div.className = "plate-item";
            div.textContent = text;
            plate.appendChild(div);

            verificarBurger();
          });

          function verificarBurger() {
            if (order.length === 5) {
              const correcto = order.join() === "1,2,3,4,5";

              document.getElementById("burgerResult").innerHTML = correcto
                ? `<div class="alert alert-success">
           üéâ ¬°Petici√≥n procesada correctamente! El backend funciona.
         </div>`
                : `<div class="alert alert-danger">
           ‚ùå Orden incorrecto. El backend fall√≥.
         </div>`;
            }
          }

          function reiniciarBurger() {
            order = [];
            plate.innerHTML = "";
            document.getElementById("burgerResult").innerHTML = "";
          }
        </script>

        <div class="d-flex justify-content-between mt-5 pt-4 border-top">
          <a
            href="{{ url_for('teoria_general') }}"
            class="btn btn-outline-secondary rounded-pill px-4"
          >
            <i class="bi bi-grid-fill me-2"></i> Temario
          </a>
          <a
            href="{{ url_for('teoria_tema', slug='historia-python') }}"
            class="btn btn-primary rounded-pill px-4"
          >
            Siguiente: Historia <i class="bi bi-arrow-right ms-2"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
